<!DOCTYPE mapping PUBLIC "-//EXOLAB/Castor Mapping DTD Version 1.0//EN"
                           "http://castor.org/mapping.dtd">
<mapping>
  <class name="ctf.jdo.tc1x.TimeStampableObject" access="shared" identity="id">
    <description>Table used for concurrency and performance testing</description>
    <map-to table="tc1x_sample" />
    <field name="id" type="integer">
      <sql name="id" type="integer" />
    </field>
    <field name="value1" type="string" required="true">
      <sql name="value1" type="varchar"/>
    </field>
    <field name="value2" type="string">
      <sql name="value2" type="varchar"/>
    </field>
  </class>

  <class name="ctf.jdo.tc1x.NestedObject" access="shared" identity="id">
    <description>nested fields testing</description>
    <map-to table="tc1x_sample" />
    <field name="id" type="integer">
      <sql name="id" type="integer" />
    </field>
    <field name="nested1.value1" type="string" required="true">
      <sql name="value1" type="varchar"/>
    </field>
    <field name="nested2.nested3.value2" type="string">
      <sql name="value2" type="varchar" dirty="ignore"/>
    </field>
  </class>
  
  <class name="ctf.jdo.tc1x.PersistentObject" access="shared" identity="id">
    <description>Test Persistent interface handling</description>
    <map-to table="tc1x_persist" />
    <field name="id" type="integer">
      <sql name="id" type="integer"/>
    </field>
    <field name="creationTime" type="java.util.Date" required="true">
      <sql name="ctime" type="date" />
    </field>
    <field name="modificationTime" type="java.util.Date" required="false">
      <sql name="mtime" type="date" dirty="ignore" />
    </field>
    <field name="value1" type="string"  required="true">
      <sql name="value1" type="varchar" />
    </field>
    <field name="parentId" type="integer" required="false">
      <sql name="parent_id" type="integer" dirty="ignore" />
    </field>
    <field name="group" type="ctf.jdo.tc1x.PersistentGroup" required="true">
      <sql name="group_id" />
    </field>
    <field name="related" type="ctf.jdo.tc1x.PersistentRelated" required="false">
      <sql many-key="persist_id" />
    </field>
  </class>

  <class name="ctf.jdo.tc1x.PersistentGroup" access="shared" identity="id">
    <description>Test Persistent interface handling</description>
    <map-to table="tc1x_group" />
    <field name="id" type="integer">
      <sql name="id" type="numeric" />
    </field>
    <field name="value1" type="string"  required="true">
      <sql name="value1" type="varchar" />
    </field>
  </class>

  <class name="ctf.jdo.tc1x.PersistentRelated" access="shared" identity="id" key-generator="MAX">
    <description>Test Persistent interface handling</description>
    <map-to table="tc1x_related" />
    <field name="id" type="integer">
      <sql name="id" type="integer"/>
    </field>
    <field name="persistent" type="ctf.jdo.tc1x.PersistentObject"  required="true">
      <sql name="persist_id" />
    </field>
  </class>

  <class name="ctf.jdo.tc1x.RollbackObject" access="shared" identity="id">
    <description>primitive rollback testing</description>
    <map-to table="tc1x_rollback" />
    <field name="id" type="long">
      <sql name="id" type="numeric" />
    </field>
    <field name="value1" type="string" required="true">
      <sql name="value1" type="varchar"/>
    </field>
    <field name="value2" type="string">
      <sql name="value2" type="varchar" dirty="ignore"/>
    </field>
    <field name="number" type="long">
      <sql name="numb" type="numeric" />
    </field>
  </class>

  <class name="ctf.jdo.tc1x.PrimaryKeysPerson" identity="firstName lastName">
    <description>testing multiple primary key</description>
    <map-to table="tc1x_pks_person" />
    <field name="firstName" type="string"  required="true">
      <sql name="fname" type="varchar" />
    </field>
    <field name="lastName" type="string" required="true">
      <sql name="lname" type="varchar" />
    </field>
    <field name="birthday" type="date"  >
      <sql name="bday" type="date" />
    </field>
    <field name="address" type="ctf.jdo.tc1x.PrimaryKeysAddress" collection="arraylist" />
  </class>

  <class name="ctf.jdo.tc1x.PrimaryKeysAddress" depends="ctf.jdo.tc1x.PrimaryKeysPerson" identity="id">
    <description>testing multiple primary key</description>
    <map-to table="tc1x_pks_address" />
    <field name="id" type="integer" >
      <sql name="id" type="integer" />
    </field>
    <field name="street" type="string" >
      <sql name="street" type="varchar"/>
    </field>
    <field name="city" type="string" >
      <sql name="city" type="varchar" />
    </field>
    <field name="state" type="string" >
      <sql name="state" type="varchar" />
    </field>
    <field name="zip" type="string" >
      <sql name="zip" type="varchar" />
    </field>
    <field name="Person" type="ctf.jdo.tc1x.PrimaryKeysPerson" >
      <sql name="fname lname"/>
    </field>
  </class>

  <class name="ctf.jdo.tc1x.PrimaryKeysEmployee" extends="ctf.jdo.tc1x.PrimaryKeysPerson">
    <description>testing multiple primary key</description>
    <map-to table="tc1x_pks_employee" />
    <field name="startDate" type="date" >
      <sql name="start_date" type="date" />
    </field>
    <field name="payRoll" type="ctf.jdo.tc1x.PrimaryKeysPayRoll" />
    <field name="contract" type="ctf.jdo.tc1x.PrimaryKeysContract" />
  </class>

  <class name="ctf.jdo.tc1x.PrimaryKeysContract" depends="ctf.jdo.tc1x.PrimaryKeysEmployee" identity="policyNo contractNo">
    <description>testing multiple primary key</description>
    <map-to table="tc1x_pks_contract" />
    <field name="policyNo" type="integer" >
      <sql name="policy_no" type="integer"/>
    </field>
    <field name="contractNo" type="integer">
      <sql name="contract_no" type="integer"/>
    </field>
    <field name="comment" type="string">
      <sql name="c_comment" type="varchar"/>
    </field>
    <field name="category" type="ctf.jdo.tc1x.PrimaryKeysCategory" collection="arraylist" >
      <sql many-table="tc1x_pks_category_contract" many-key="policy_no contract_no" name="cate_id" />
    </field>
    <field name="employee" type="ctf.jdo.tc1x.PrimaryKeysEmployee" >
      <sql name="fname lname" />
    </field>
  </class>

  <class name="ctf.jdo.tc1x.PrimaryKeysCategory" identity="id" >
    <description>testing multiple primary key</description>
    <map-to table="tc1x_pks_category" />
    <field name="id" type="integer">
      <sql name="id" type="integer" />
    </field>
    <field name="name" type="string" required="true">
      <sql name="name" type="varchar" />
    </field>
    <field name="contract" type="ctf.jdo.tc1x.PrimaryKeysContract" collection="arraylist" >
      <sql many-table="tc1x_pks_category_contract" many-key="cate_id" name="policy_no contract_no" />
    </field>
  </class>

  <class name="ctf.jdo.tc1x.PrimaryKeysPayRoll" depends="ctf.jdo.tc1x.PrimaryKeysEmployee" identity="id">
    <description>testing multiple primary key</description>
    <map-to table="tc1x_pks_payroll" />
    <field name="id" type="integer">
      <sql name="id" type="integer"/>
    </field>
    <field name="holiday" type="integer" >
      <sql name="holiday" type="integer" />
    </field>
    <field name="hourlyRate" type="integer" >
      <sql name="hourly_rate" type="integer" />
    </field>
    <field name="employee" type="ctf.jdo.tc1x.PrimaryKeysEmployee" >
      <sql name="fname lname" />
    </field>
  </class>
  
  <class name="ctf.jdo.tc1x.PrimaryKeysOnly" identity="firstName lastName">
    <description>testing multiple primary key (where all fields are part of identity)</description>
    <map-to table="tc1x_pks_only" />
    <field name="firstName" type="string"  required="true">
      <sql name="fname" type="varchar" />
    </field>
    <field name="lastName" type="string" required="true">
      <sql name="lname" type="varchar" />
    </field>
  </class>
  
</mapping>
